<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>åŒ¯å…¥å–®å­—å¡å·¥å…·</title>
<style>
body{font-family:"Microsoft JhengHei",sans-serif;max-width:700px;margin:40px auto;padding:20px;background:#f0f4f6;color:#3f5661;}
h2{color:#3f5661;}
.btn{padding:14px 28px;background:#3f5661;color:white;border:none;border-radius:8px;cursor:pointer;font-size:1rem;font-weight:bold;margin:8px 4px;}
.btn:hover{background:#7a96a4;}
.btn:disabled{background:#9aacb4;cursor:not-allowed;}
.btn-danger{background:#b07070;}.btn-danger:hover{background:#a05060;}
#log{background:white;border-radius:8px;padding:16px;margin-top:20px;height:400px;overflow-y:auto;font-size:0.82rem;font-family:monospace;border:1px solid #c8d8de;}
.ok{color:#4a7c6f;}.err{color:#b05555;}.info{color:#5b8fa8;}.warn{color:#c4956a;font-weight:bold;}
.progress{background:#e6eff3;border-radius:6px;height:10px;margin:12px 0;}
.progress-fill{background:#5b8fa8;height:100%;border-radius:6px;transition:width 0.3s;width:0%;}
table{width:100%;font-size:0.82rem;border-collapse:collapse;margin:10px 0;}
td,th{padding:5px 8px;border:1px solid #c8d8de;}
th{background:#e6eff3;font-weight:bold;}
</style>
</head>
<body>
<h2>ğŸ¦´ Anatomy Pro â€” æ‰¹æ¬¡åŒ¯å…¥å·¥å…·</h2>
<details><summary style="cursor:pointer;font-weight:bold;color:#5b8fa8;margin-bottom:8px;">ğŸ“‹ é»é–‹æŸ¥çœ‹åŒ¯å…¥å…§å®¹</summary>
<table>
<tr><th>éƒ¨ä½</th><th>å¼µæ•¸</th><th>åŒ…å«é¡å‹</th></tr>
<tr><td>èƒ¸å‰å£</td><td>7</td><td>Muscles, Arteries, Nerves</td></tr>
<tr><td>å¿ƒèˆ‡è‚º</td><td>23</td><td>Muscles, Arteries, Veins, Valves, Ligaments, Other</td></tr>
<tr><td>å¾Œç¸±è†ˆ</td><td>25</td><td>Arteries, Veins, Nerves, Organs, Ligaments, Lymphatics</td></tr>
<tr><td>è…¹å‰å£</td><td>18</td><td>Muscles, Arteries, Nerves, Ligaments, Other</td></tr>
<tr><td>è‚èˆ‡æ¶ˆåŒ–é“</td><td>30</td><td>Organs, Arteries, Veins, Other</td></tr>
<tr><td>è…è‡Ÿèˆ‡å…¶ä»–</td><td>32</td><td>Organs, Arteries, Veins, Nerves, Muscles, Lymphatics</td></tr>
<tr><th>åˆè¨ˆ</th><th>135 å¼µ</th><th>9 ç¨®é¡å‹</th></tr>
</table></details>
<p style="font-size:0.85rem;color:#b05555;font-weight:bold;">âš ï¸ åªèƒ½åŸ·è¡Œä¸€æ¬¡ï¼Œé¿å…é‡è¤‡åŒ¯å…¥ï¼</p>
<div id="login-area"><button class="btn" id="login-btn">ğŸ”‘ Google ç™»å…¥</button></div>
<div id="import-area" style="display:none;">
  <p id="user-label" style="color:#4a7c6f;font-weight:bold;margin:8px 0;"></p>
  <button class="btn" id="import-btn">ğŸš€ é–‹å§‹åŒ¯å…¥</button>
  <button class="btn btn-danger" id="logout-btn">ç™»å‡º</button>
  <div class="progress"><div class="progress-fill" id="progress-fill"></div></div>
  <div id="progress-label" style="font-size:0.82rem;color:#7a96a4;text-align:center;min-height:18px;"></div>
</div>
<div id="log"></div>
<script type="module">
import{initializeApp}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import{getFirestore,collection,addDoc}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
import{getAuth,signInWithPopup,GoogleAuthProvider,onAuthStateChanged,signOut}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
const cfg={apiKey:"AIzaSyB43JZQ7qXrcU_WkVHGEPeZdmicXcmjbq0",authDomain:"anatomy-dc089.firebaseapp.com",projectId:"anatomy-dc089",storageBucket:"anatomy-dc089.firebasestorage.app",messagingSenderId:"742909907454",appId:"1:742909907454:web:5afaaf70fc1b41247270af"};
const app=initializeApp(cfg),db=getFirestore(app),auth=getAuth(),prov=new GoogleAuthProvider();
function log(msg,cls='info'){const d=document.getElementById('log');d.innerHTML+=`<div class="${cls}">${msg}</div>`;d.scrollTop=d.scrollHeight;}
function setProgress(pct,label=''){document.getElementById('progress-fill').style.width=pct+'%';document.getElementById('progress-label').textContent=label;}
onAuthStateChanged(auth,user=>{
  if(user){document.getElementById('login-area').style.display='none';document.getElementById('import-area').style.display='block';document.getElementById('user-label').textContent=`âœ… å·²ç™»å…¥ï¼š${user.displayName}`;}
  else{document.getElementById('login-area').style.display='block';document.getElementById('import-area').style.display='none';}
});
document.getElementById('login-btn').onclick=()=>signInWithPopup(auth,prov);
document.getElementById('logout-btn').onclick=()=>signOut(auth);

const REGIONS=[
  {key:'thorax-anterior',    name:'èƒ¸å‰å£',     order:6},
  {key:'thorax-heart',       name:'å¿ƒèˆ‡è‚º',     order:7},
  {key:'thorax-mediastinum', name:'å¾Œç¸±è†ˆ',     order:8},
  {key:'abdomen-anterior',   name:'è…¹å‰å£',     order:9},
  {key:'abdomen-liver',      name:'è‚èˆ‡æ¶ˆåŒ–é“', order:10},
  {key:'abdomen-kidney',     name:'è…è‡Ÿèˆ‡å…¶ä»–', order:11},
];

const CARDS=[
  // èƒ¸å‰å£
  ['External intercostal m.','å¤–è‚‹é–“è‚Œ','Muscles','thorax-anterior'],
  ['Internal intercostal m.','å…§è‚‹é–“è‚Œ','Muscles','thorax-anterior'],
  ['Innermost intercostal m.','æœ€å…§è‚‹é–“è‚Œ','Muscles','thorax-anterior'],
  ['Transversus thoracis m.','èƒ¸æ©«è‚Œ','Muscles','thorax-anterior'],
  ['Intercostal a. & v.','è‚‹é–“å‹•éœè„ˆ','Arteries','thorax-anterior'],
  ['Internal thoracic a. & v.','èƒ¸å»“å…§å‹•éœè„ˆ','Arteries','thorax-anterior'],
  ['Intercostal n.','è‚‹é–“ç¥ç¶“','Nerves','thorax-anterior'],
  // å¿ƒèˆ‡è‚º
  ['Pulmonary a.','è‚ºå‹•è„ˆ','Arteries','thorax-heart'],
  ['Pulmonary v.','è‚ºéœè„ˆ','Veins','thorax-heart'],
  ['Pectinate m.','æ¢³ç‹€è‚Œ','Muscles','thorax-heart'],
  ['Crista terminalis','ç•Œåµ´','Other','thorax-heart'],
  ['Fossa ovalis','åµåœ“çª©','Other','thorax-heart'],
  ['Trabeculae carneae','è‚‰æŸ±','Other','thorax-heart'],
  ['Papillary m.','ä¹³é ­è‚Œ','Muscles','thorax-heart'],
  ['Chordae tendineae','è…±ç´¢','Other','thorax-heart'],
  ['Tricuspid valve','ä¸‰å°–ç“£','Other','thorax-heart'],
  ['Mitral valve','äºŒå°–ç“£ï¼ˆåƒ§å¸½ç“£ï¼‰','Other','thorax-heart'],
  ['Aortic valve','ä¸»å‹•è„ˆç“£','Other','thorax-heart'],
  ['Pulmonary valve','è‚ºå‹•è„ˆç“£','Other','thorax-heart'],
  ['Ascending aorta','å‡ä¸»å‹•è„ˆ','Arteries','thorax-heart'],
  ['Pulmonary trunk','è‚ºå‹•è„ˆå¹¹','Arteries','thorax-heart'],
  ['Left coronary a.','å·¦å† ç‹€å‹•è„ˆ','Arteries','thorax-heart'],
  ['Circumflex branch','æ—‹æ”¯','Arteries','thorax-heart'],
  ['Anterior interventricular a.','å‰å®¤é–“å‹•è„ˆ','Arteries','thorax-heart'],
  ['Right coronary a.','å³å† ç‹€å‹•è„ˆ','Arteries','thorax-heart'],
  ['Posterior interventricular a.','å¾Œå®¤é–“å‹•è„ˆ','Arteries','thorax-heart'],
  ['Superior vena cava','ä¸Šè…”éœè„ˆ','Veins','thorax-heart'],
  ['Inferior vena cava','ä¸‹è…”éœè„ˆ','Veins','thorax-heart'],
  ['Coronary sinus','å† ç‹€ç«‡','Veins','thorax-heart'],
  ['Great cardiac v.','å¿ƒå¤§éœè„ˆ','Veins','thorax-heart'],
  ['Middle cardiac v.','å¿ƒä¸­éœè„ˆ','Veins','thorax-heart'],
  ['Anterior cardiac v.','å¿ƒå‰éœè„ˆ','Veins','thorax-heart'],
  // å¾Œç¸±è†ˆ
  ['Aortic arch','ä¸»å‹•è„ˆå¼“','Arteries','thorax-mediastinum'],
  ['Brachiocephalic trunk','é ­è‡‚å¹¹','Arteries','thorax-mediastinum'],
  ['Left common carotid a.','å·¦é ¸ç¸½å‹•è„ˆ','Arteries','thorax-mediastinum'],
  ['Left subclavian a.','å·¦é–éª¨ä¸‹å‹•è„ˆ','Arteries','thorax-mediastinum'],
  ['Thoracic aorta','èƒ¸ä¸»å‹•è„ˆ','Arteries','thorax-mediastinum'],
  ['Azygos v.','å¥‡éœè„ˆ','Veins','thorax-mediastinum'],
  ['Hemiazygos v.','åŠå¥‡éœè„ˆ','Veins','thorax-mediastinum'],
  ['Accessory hemiazygos v.','å‰¯åŠå¥‡éœè„ˆ','Veins','thorax-mediastinum'],
  ['Esophagus','é£Ÿé“','Organs','thorax-mediastinum'],
  ['Trachea','æ°£ç®¡','Organs','thorax-mediastinum'],
  ['Carina','æ°£ç®¡éš†çª','Organs','thorax-mediastinum'],
  ['Thoracic duct','èƒ¸ç®¡','Other','thorax-mediastinum'],
  ['Ligamentum arteriosum','å‹•è„ˆéŸŒå¸¶','Other','thorax-mediastinum'],
  ['Phrenic n.','è†ˆç¥ç¶“','Nerves','thorax-mediastinum'],
  ['Left vagus n.','å·¦è¿·èµ°ç¥ç¶“','Nerves','thorax-mediastinum'],
  ['Left recurrent laryngeal n.','å·¦å–‰è¿”ç¥ç¶“','Nerves','thorax-mediastinum'],
  ['Right vagus n.','å³è¿·èµ°ç¥ç¶“','Nerves','thorax-mediastinum'],
  ['Right recurrent laryngeal n.','å³å–‰è¿”ç¥ç¶“','Nerves','thorax-mediastinum'],
  ['Anterior vagal trunk','å‰è¿·èµ°å¹¹','Nerves','thorax-mediastinum'],
  ['Posterior vagal trunk','å¾Œè¿·èµ°å¹¹','Nerves','thorax-mediastinum'],
  ['Esophageal plexus','é£Ÿé“å¢','Nerves','thorax-mediastinum'],
  ['Thoracic sympathetic trunk','èƒ¸éƒ¨äº¤æ„Ÿå¹¹','Nerves','thorax-mediastinum'],
  ['Gray ramus communicans','ç°äº¤é€šæ”¯','Nerves','thorax-mediastinum'],
  ['White ramus communicans','ç™½äº¤é€šæ”¯','Nerves','thorax-mediastinum'],
  ['Greater splanchnic n.','å¤§å…§è‡Ÿç¥ç¶“','Nerves','thorax-mediastinum'],
  // è…¹å‰å£
  ['External oblique m.','è…¹å¤–æ–œè‚Œ','Muscles','abdomen-anterior'],
  ['Internal oblique m.','è…¹å…§æ–œè‚Œ','Muscles','abdomen-anterior'],
  ['Transversus abdominis m.','è…¹æ©«è‚Œ','Muscles','abdomen-anterior'],
  ['Rectus abdominis m.','è…¹ç›´è‚Œ','Muscles','abdomen-anterior'],
  ['Inguinal ligament','è…¹è‚¡æºéŸŒå¸¶','Other','abdomen-anterior'],
  ['Superficial inguinal ring','è…¹è‚¡æºç®¡æ·ºç’°','Other','abdomen-anterior'],
  ['Deep inguinal ring','è…¹è‚¡æºç®¡æ·±ç’°','Other','abdomen-anterior'],
  ['Arcuate line','å¼“ç‹€ç·š','Other','abdomen-anterior'],
  ['Conjoint tendon','è¯åˆè…±','Other','abdomen-anterior'],
  ['Spermatic cord','ç²¾ç´¢','Other','abdomen-anterior'],
  ['Ilioinguinal n.','é«‚è…¹è‚¡æºç¥ç¶“','Nerves','abdomen-anterior'],
  ['Superior epigastric a.','è…¹å£ä¸Šå‹•è„ˆ','Arteries','abdomen-anterior'],
  ['Inferior epigastric a.','è…¹å£ä¸‹å‹•è„ˆ','Arteries','abdomen-anterior'],
  ['Hepatoduodenal ligament','è‚åäºŒæŒ‡è…¸éŸŒå¸¶','Other','abdomen-anterior'],
  ['Hepatogastric ligament','è‚èƒƒéŸŒå¸¶','Other','abdomen-anterior'],
  ['Lesser omentum','å°ç¶²è†œ','Other','abdomen-anterior'],
  ['Greater omentum','å¤§ç¶²è†œ','Other','abdomen-anterior'],
  ['Omental foramen','ç¶²è†œå­”ï¼ˆWinslowå­”ï¼‰','Other','abdomen-anterior'],
  // è‚èˆ‡æ¶ˆåŒ–é“
  ['Right lobe of liver','è‚å³è‘‰','Organs','abdomen-liver'],
  ['Left lobe of liver','è‚å·¦è‘‰','Organs','abdomen-liver'],
  ['Caudate lobe','å°¾ç‹€è‘‰','Organs','abdomen-liver'],
  ['Quadrate lobe','æ–¹è‘‰','Organs','abdomen-liver'],
  ['Gallbladder','è†½å›Š','Organs','abdomen-liver'],
  ['Cystic duct','è†½å›Šç®¡','Organs','abdomen-liver'],
  ['Hepatic portal v.','è‚é–€éœè„ˆ','Veins','abdomen-liver'],
  ['Hepatic a. proper','è‚å›ºæœ‰å‹•è„ˆ','Arteries','abdomen-liver'],
  ['Common bile duct','ç¸½è†½ç®¡','Organs','abdomen-liver'],
  ['Left gastric a.','èƒƒå·¦å‹•è„ˆ','Arteries','abdomen-liver'],
  ['Splenic a.','è„¾å‹•è„ˆ','Arteries','abdomen-liver'],
  ['Common hepatic a.','è‚ç¸½å‹•è„ˆ','Arteries','abdomen-liver'],
  ['Gastroduodenal a.','èƒƒåäºŒæŒ‡è…¸å‹•è„ˆ','Arteries','abdomen-liver'],
  ['Stomach','èƒƒ','Organs','abdomen-liver'],
  ['Pancreas','èƒ°è‡Ÿ','Organs','abdomen-liver'],
  ['Duodenum','åäºŒæŒ‡è…¸','Organs','abdomen-liver'],
  ['Hepatopancreatic ampulla','è‚èƒ°å£ºè…¹','Organs','abdomen-liver'],
  ['Major duodenal papilla','åäºŒæŒ‡è…¸å¤§ä¹³é ­','Organs','abdomen-liver'],
  ['Jejunum','ç©ºè…¸','Organs','abdomen-liver'],
  ['Ileum','è¿´è…¸','Organs','abdomen-liver'],
  ['Arteriae rectae','ç›´å‹•è„ˆ','Arteries','abdomen-liver'],
  ['Arcades (intestinal)','è…¸å‹•è„ˆå¼“','Arteries','abdomen-liver'],
  ['Cecum','ç›²è…¸','Organs','abdomen-liver'],
  ['Appendix','é—Œå°¾','Organs','abdomen-liver'],
  ['Ileocecal lips','è¿´ç›²ç“£å”‡','Other','abdomen-liver'],
  ['Opening of the appendix','é—Œå°¾é–‹å£','Other','abdomen-liver'],
  ['Colon','çµè…¸','Organs','abdomen-liver'],
  ['Haustra','çµè…¸è¢‹','Other','abdomen-liver'],
  ['Tenia coli','çµè…¸å¸¶','Other','abdomen-liver'],
  ['Omental appendages','è…¸è„‚å‚','Other','abdomen-liver'],
  // è…è‡Ÿèˆ‡å…¶ä»–
  ['Renal a. & v.','è…å‹•éœè„ˆ','Arteries','abdomen-kidney'],
  ['Renal pelvis','è…ç›‚','Organs','abdomen-kidney'],
  ['Renal capsule','è…åŒ…è†œ','Other','abdomen-kidney'],
  ['Renal cortex','è…çš®è³ª','Other','abdomen-kidney'],
  ['Minor calyx','å°è…ç›','Organs','abdomen-kidney'],
  ['Major calyx','å¤§è…ç›','Organs','abdomen-kidney'],
  ['Ureter','è¼¸å°¿ç®¡','Organs','abdomen-kidney'],
  ['Suprarenal gland','è…ä¸Šè…º','Organs','abdomen-kidney'],
  ['Superior suprarenal a.','è…ä¸Šè…ºä¸Šå‹•è„ˆ','Arteries','abdomen-kidney'],
  ['Middle suprarenal a.','è…ä¸Šè…ºä¸­å‹•è„ˆ','Arteries','abdomen-kidney'],
  ['Inferior suprarenal a.','è…ä¸Šè…ºä¸‹å‹•è„ˆ','Arteries','abdomen-kidney'],
  ['Suprarenal v.','è…ä¸Šè…ºéœè„ˆ','Veins','abdomen-kidney'],
  ['Gonadal a.','æ€§è…ºå‹•è„ˆ','Arteries','abdomen-kidney'],
  ['Gonadal v.','æ€§è…ºéœè„ˆ','Veins','abdomen-kidney'],
  ['Abdominal aorta','è…¹ä¸»å‹•è„ˆ','Arteries','abdomen-kidney'],
  ['Celiac trunk','è…¹è…”å¹¹','Arteries','abdomen-kidney'],
  ['Superior mesenteric a.','è…¸ç¹«è†œä¸Šå‹•è„ˆ','Arteries','abdomen-kidney'],
  ['Inferior mesenteric a.','è…¸ç¹«è†œä¸‹å‹•è„ˆ','Arteries','abdomen-kidney'],
  ['Inferior vena cava (abdomen)','ä¸‹è…”éœè„ˆï¼ˆè…¹éƒ¨ï¼‰','Veins','abdomen-kidney'],
  ['Inferior phrenic a.','è†ˆä¸‹å‹•è„ˆ','Arteries','abdomen-kidney'],
  ['Cisterna chyli','ä¹³ç³œæ± ','Other','abdomen-kidney'],
  ['Subcostal n.','è‚‹ä¸‹ç¥ç¶“','Nerves','abdomen-kidney'],
  ['Iliohypogastric n.','é«‚è…¹ä¸‹ç¥ç¶“','Nerves','abdomen-kidney'],
  ['Genitofemoral n.','ç”Ÿæ®–è‚¡ç¥ç¶“','Nerves','abdomen-kidney'],
  ['Lateral femoral cutaneous n.','è‚¡å¤–å´çš®ç¥ç¶“','Nerves','abdomen-kidney'],
  ['Femoral n.','è‚¡ç¥ç¶“','Nerves','abdomen-kidney'],
  ['Obturator n.','é–‰å­”ç¥ç¶“','Nerves','abdomen-kidney'],
  ['Diaphragm','æ©«è†ˆ','Muscles','abdomen-kidney'],
  ['Quadratus lumborum m.','è…°æ–¹è‚Œ','Muscles','abdomen-kidney'],
  ['Psoas major m.','è…°å¤§è‚Œ','Muscles','abdomen-kidney'],
  ['Psoas minor m.','è…°å°è‚Œ','Muscles','abdomen-kidney'],
  ['Iliacus m.','é«‚è‚Œ','Muscles','abdomen-kidney'],
];

document.getElementById('import-btn').onclick=async()=>{
  const user=auth.currentUser;
  if(!user){alert('è«‹å…ˆç™»å…¥');return;}
  if(!confirm(`ç¢ºå®šåŒ¯å…¥ 6 å€‹éƒ¨ä½ + ${CARDS.length} å¼µå–®å­—å¡ï¼Ÿ\nâš ï¸ åªèƒ½åŸ·è¡Œä¸€æ¬¡ï¼`))return;
  const btn=document.getElementById('import-btn');
  btn.disabled=true;btn.textContent='åŒ¯å…¥ä¸­...';
  document.getElementById('log').innerHTML='';
  log('â•â•â• é–‹å§‹åŒ¯å…¥ â•â•â•','warn');
  log(`\nğŸ“ æ–°å¢ ${REGIONS.length} å€‹éƒ¨ä½...`,'info');
  const ridMap={};
  for(const r of REGIONS){
    try{
      const ref=await addDoc(collection(db,'regions'),{name:r.name,order:r.order});
      ridMap[r.key]=ref.id;
      log(`  âœ… ${r.name}`,'ok');
    }catch(e){log(`  âŒ ${r.name}: ${e.message}`,'err');}
  }
  log(`\nğŸƒ æ–°å¢ ${CARDS.length} å¼µå–®å­—å¡...`,'info');
  let ok=0,fail=0;
  for(let i=0;i<CARDS.length;i++){
    const[en,ch,type,rkey]=CARDS[i];
    setProgress(Math.round((i+1)/CARDS.length*100),`${i+1}/${CARDS.length} â€” ${en}`);
    try{
      await addDoc(collection(db,'flashcards'),{en,ch,type,region:ridMap[rkey]||rkey,comments:[],likes:[],createdBy:user.displayName,createdByUid:user.uid,createdAt:new Date().toISOString()});
      log(`  âœ… [${type}] ${en} â†’ ${ch}`,'ok');ok++;
    }catch(e){log(`  âŒ ${en}: ${e.message}`,'err');fail++;}
  }
  setProgress(100,'å®Œæˆï¼');
  log('\nâ•â•â• å®Œæˆ â•â•â•','warn');
  log(`âœ… æˆåŠŸï¼š${ok} å¼µ`,'ok');
  if(fail>0)log(`âŒ å¤±æ•—ï¼š${fail} å¼µ`,'err');
  log('âœ¨ é‡æ–°æ•´ç† Anatomy Pro å³å¯çœ‹åˆ°æ–°å–®å­—å¡ï¼','warn');
  btn.textContent='âœ… å®Œæˆ';
};
</script>
</body>
</html>
